
<script src="JavaScript/Upload.js"></script>
<script src="JavaScript/jquery-1.11.3.min.js"></script>


<form>
    <div style="margin-left: 20px;">
        <h1>File Uploader</h1>
        <p>
            <strong>File To Upload</strong>:
            <br />
            <span class="input-control text">
                <input type="file" id="file" name="file" style="width: 50%" />
            </span>
        </p>
        <div id="output">


            <p>
                <input type="button" id="buttonUploadFile" value="Upload File" />
            </p>

            <hr />

            <p>
                <progress id="fileUploadProgress" value="0" max="100"></progress>

            </p>
            
        </div>



    </div>
    <div>
    </div>
</form>
<script type="text/javascript">

    var selectedFileName;
    $("buttonUploadFile").on("click", function (e) { e.preventDefault; });
    $(document).on('setPercentComplete', function (e, prog) { $("#fileUploadProgress").val(prog); });
    $("#buttonUploadFile").click(function () { GetSasUrl(); });

    $("#GetMediaUrlsButton").click(function () { GetMediaUrls(); });


    function CommitFinished() {
     alert("YOYO");
    }

    var sasurl = "";

    function GetSasUrl() {
        selectedFileName = $("input[type=file]").val().replace(/^.*[\\\/]/, '');
        containerName = $("#containerName").val();
        fileName = selectedFileName;
        $.get("http://localhost:31475/api/GetSasUrl", {}, function (res) {
            sasurl = res;
            setFile($("#file")[0].files[0], res);
        });
    }

    function commit() {
        $.post("http://localhost:31475/api/CommitBlob", {
           
            blobParts: blobface.blockIds,
            UserId: "11111111-1111-1111-1111-111111111111",
            AlbumId: "11111111-1111-1111-1111-111111111111",
            SasUrl: sasurl,
            //sendNotification: store.sendNotification(blobface.selectedFile.name)
        }, function (res) {
            CommitFinished();
        });
    }
</script>